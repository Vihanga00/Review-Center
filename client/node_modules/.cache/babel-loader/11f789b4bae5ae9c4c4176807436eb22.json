{"ast":null,"code":"var _jsxFileName = \"D:\\\\review center\\\\client\\\\src\\\\components\\\\Posts\\\\Top5.js\";\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CircularProgress, Grid, Typography, Button, Container } from '@material-ui/core';\nimport { getTopPosts } from '../../actions/getTopPosts';\nimport useStyles from './topstyles';\nimport jsPDF from 'jspdf';\nimport 'tourgenie.png';\nconst MESSAGE_MAX_LENGTH = 450; // Adjust the maximum length as per your requirement\n\nconst Top5 = () => {\n  const dispatch = useDispatch();\n  const {\n    posts,\n    isLoading\n  } = useSelector(state => state.posts);\n  const sortedPosts = [...posts].sort((a, b) => b.likeCount - a.likeCount);\n  const classes = useStyles();\n  const containerRef = useRef(null);\n  useEffect(() => {\n    dispatch(getTopPosts());\n  }, [dispatch]);\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      justify: \"center\",\n      alignItems: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  const truncateText = text => {\n    if (text.length <= MESSAGE_MAX_LENGTH) {\n      return text;\n    }\n\n    return `${text.substring(0, MESSAGE_MAX_LENGTH)}...`;\n  };\n\n  const handleDownload = () => {\n    const pdf = new jsPDF();\n    const pageWidth = pdf.internal.pageSize.getWidth();\n    const pageHeight = pdf.internal.pageSize.getHeight();\n    const leftMargin = 20;\n    const rightMargin = pageWidth - leftMargin;\n    const topMargin = 20;\n    const bottomMargin = pageHeight - topMargin;\n    let yPos = topMargin; // Add heading\n\n    pdf.setFontSize(16);\n    pdf.setFont('helvetica', 'bold');\n    pdf.text('Best 5 Experiences of TourGenie baised on the Reviews', leftMargin, yPos);\n    yPos += 15;\n    sortedPosts.forEach((post, index) => {\n      if (index !== 0) {\n        yPos += 10;\n      }\n\n      const {\n        title,\n        name,\n        createdAt,\n        likeCount\n      } = post; // Add border and background color to the post container\n\n      pdf.setFillColor(230);\n      pdf.rect(leftMargin, yPos, rightMargin - leftMargin, 40, 'F');\n      pdf.setFontSize(14);\n      pdf.setFont('helvetica', 'normal'); // Add border and background color to the review title\n\n      pdf.setFillColor(200);\n      pdf.rect(leftMargin, yPos, rightMargin - leftMargin, 10, 'F'); // Add review title text\n\n      pdf.setTextColor(255);\n      pdf.text(`${index + 1}. Review Title: ${title}`, leftMargin + 2, yPos + 8);\n      pdf.setFontSize(12);\n      pdf.setTextColor(0); // Add review details\n\n      pdf.text(`Review posted by: ${name}`, leftMargin + 5, yPos + 20);\n      pdf.text(`Review posted at: ${createdAt.substring(0, 10)}`, leftMargin + 5, yPos + 30);\n      pdf.text(`Total Likes: ${likeCount}`, leftMargin + 5, yPos + 40);\n      yPos += 50;\n\n      if (yPos + 30 > bottomMargin) {\n        pdf.addPage();\n        yPos = topMargin;\n      }\n    });\n    pdf.save('top_posts.pdf');\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"st\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, \"Best 5 Experiences to have with TourGenie according to the Customer Reviews\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleDownload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, \"Download as PDF\"), sortedPosts.map((post, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: post._id,\n    className: classes.postContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, index > 0 && /*#__PURE__*/React.createElement(\"hr\", {\n    className: classes.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    component: \"h2\",\n    className: classes.reviewTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, index + 1, \". Review Title: \", post.title), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    className: classes.reviewerName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, \"Review posted by: \", post.name), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"textSecondary\",\n    className: classes.postedAt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, \"Review posted at: \", post.createdAt.substring(0, 10)), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    component: \"p\",\n    className: classes.reviewMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, \"Review Message: \", truncateText(post.message)), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"textSecondary\",\n    className: classes.totalLikes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, \"Total Likes: \", post.likeCount))));\n};\n\nexport default Top5;","map":{"version":3,"sources":["D:/review center/client/src/components/Posts/Top5.js"],"names":["React","useEffect","useRef","useDispatch","useSelector","CircularProgress","Grid","Typography","Button","Container","getTopPosts","useStyles","jsPDF","MESSAGE_MAX_LENGTH","Top5","dispatch","posts","isLoading","state","sortedPosts","sort","a","b","likeCount","classes","containerRef","truncateText","text","length","substring","handleDownload","pdf","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","leftMargin","rightMargin","topMargin","bottomMargin","yPos","setFontSize","setFont","forEach","post","index","title","name","createdAt","setFillColor","rect","setTextColor","addPage","save","map","_id","postContainer","divider","reviewTitle","reviewerName","postedAt","reviewMessage","message","totalLikes"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { CircularProgress, Grid, Typography, Button, Container } from '@material-ui/core';\r\nimport { getTopPosts } from '../../actions/getTopPosts';\r\nimport useStyles from './topstyles';\r\nimport jsPDF from 'jspdf';\r\nimport 'tourgenie.png';\r\n\r\nconst MESSAGE_MAX_LENGTH = 450; // Adjust the maximum length as per your requirement\r\n\r\nconst Top5 = () => {\r\n  const dispatch = useDispatch();\r\n  const { posts, isLoading } = useSelector((state) => state.posts);\r\n  const sortedPosts = [...posts].sort((a, b) => b.likeCount - a.likeCount);\r\n  const classes = useStyles();\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopPosts());\r\n  }, [dispatch]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Grid container justify=\"center\" alignItems=\"center\">\r\n        <CircularProgress />\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  const truncateText = (text) => {\r\n    if (text.length <= MESSAGE_MAX_LENGTH) {\r\n      return text;\r\n    }\r\n    return `${text.substring(0, MESSAGE_MAX_LENGTH)}...`;\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    const pdf = new jsPDF();\r\n  \r\n    const pageWidth = pdf.internal.pageSize.getWidth();\r\n    const pageHeight = pdf.internal.pageSize.getHeight();\r\n  \r\n    const leftMargin = 20;\r\n    const rightMargin = pageWidth - leftMargin;\r\n    const topMargin = 20;\r\n    const bottomMargin = pageHeight - topMargin;\r\n  \r\n    let yPos = topMargin;\r\n  \r\n    // Add heading\r\n    pdf.setFontSize(16);\r\n    pdf.setFont('helvetica', 'bold');\r\n    pdf.text('Best 5 Experiences of TourGenie baised on the Reviews', leftMargin, yPos);\r\n    yPos += 15;\r\n  \r\n    sortedPosts.forEach((post, index) => {\r\n      if (index !== 0) {\r\n        yPos += 10;\r\n      }\r\n  \r\n      const { title, name, createdAt, likeCount } = post;\r\n  \r\n      // Add border and background color to the post container\r\n      pdf.setFillColor(230);\r\n      pdf.rect(leftMargin, yPos, rightMargin - leftMargin, 40, 'F');\r\n  \r\n      pdf.setFontSize(14);\r\n      pdf.setFont('helvetica', 'normal');\r\n  \r\n      // Add border and background color to the review title\r\n      pdf.setFillColor(200);\r\n      pdf.rect(leftMargin, yPos, rightMargin - leftMargin, 10, 'F');\r\n  \r\n      // Add review title text\r\n      pdf.setTextColor(255);\r\n      pdf.text(`${index + 1}. Review Title: ${title}`, leftMargin + 2, yPos + 8);\r\n  \r\n      pdf.setFontSize(12);\r\n      pdf.setTextColor(0);\r\n  \r\n      // Add review details\r\n      pdf.text(`Review posted by: ${name}`, leftMargin + 5, yPos + 20);\r\n      pdf.text(`Review posted at: ${createdAt.substring(0, 10)}`, leftMargin + 5, yPos + 30);\r\n      pdf.text(`Total Likes: ${likeCount}`, leftMargin + 5, yPos + 40);\r\n  \r\n      yPos += 50;\r\n  \r\n      if (yPos + 30 > bottomMargin) {\r\n        pdf.addPage();\r\n        yPos = topMargin;\r\n      }\r\n    });\r\n  \r\n    pdf.save('top_posts.pdf');\r\n  };\r\n  \r\n  \r\n  \r\n  \r\n  \r\n\r\n  return (\r\n    <Container maxWidth=\"st\">\r\n      <h1>Best 5 Experiences to have with TourGenie according to the Customer Reviews</h1>\r\n\r\n      <Button variant=\"contained\" color=\"primary\" onClick={handleDownload}>\r\n        Download as PDF\r\n      </Button>\r\n\r\n      {sortedPosts.map((post, index) => (\r\n        <div key={post._id} className={classes.postContainer}>\r\n          {index > 0 && <hr className={classes.divider} />}\r\n          <Typography variant=\"h5\" component=\"h2\" className={classes.reviewTitle}>\r\n            {index + 1}. Review Title: {post.title}\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\" className={classes.reviewerName}>\r\n            Review posted by: {post.name}\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textSecondary\" className={classes.postedAt}>\r\n            Review posted at: {post.createdAt.substring(0, 10)}\r\n          </Typography>\r\n          <Typography variant=\"body2\" component=\"p\" className={classes.reviewMessage}>\r\n            Review Message: {truncateText(post.message)}\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textSecondary\" className={classes.totalLikes}>\r\n            Total Likes: {post.likeCount}\r\n</Typography>\r\n</div>\r\n))}\r\n</Container>\r\n);\r\n\r\n};\r\n\r\nexport default Top5;\r\n"]},"metadata":{},"sourceType":"module"}